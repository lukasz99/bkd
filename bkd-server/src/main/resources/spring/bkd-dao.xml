<?xml version="1.0" encoding="utf-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="
      http://www.springframework.org/schema/beans 
      http://www.springframework.org/schema/beans/spring-beans.xsd
    
      http://www.springframework.org/schema/tx 
      http://www.springframework.org/schema/tx/spring-tx.xsd
      
      http://www.springframework.org/schema/aop 
      http://www.springframework.org/schema/aop/spring-aop.xsd">

  <!-- imxdip dao: db connection -->

  <bean id="bkdFlipSessionFactory"
	class="org.springframework.orm.hibernate5.LocalSessionFactoryBean">
    <property name="dataSource" ref="bkdFlipSource"/>
    
    <property name="packagesToScan"
              value="edu.ucla.mbi.bkd.store"/>
    
    <property name="hibernateProperties">
      <props>
	<prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
	<prop key="hibernate.current_session_context_class">thread</prop>
	<prop key="hibernate.show_sql">false</prop>
      </props>
    </property>
  </bean>
  
  <bean id="bkdFlopSessionFactory"
        class="org.springframework.orm.hibernate5.LocalSessionFactoryBean">
    <property name="dataSource" ref="bkdFlopSource"/>
    
    <property name="packagesToScan"
              value="edu.ucla.mbi.bkd.store"/>
    
    <property name="hibernateProperties">
      <props>
        <prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect</prop>
        <prop key="hibernate.current_session_context_class">thread</prop>
        <prop key="hibernate.show_sql">false</prop>
      </props>
    </property>
  </bean>

  <bean id="bkdFlipSource" scope="singleton"
        class="org.springframework.jndi.JndiObjectFactoryBean" >

    <property name="jndiName" value="java:comp/env/jdbc/bkd_flip" />
    <property name="resourceRef" value="true"/>
  </bean>
  
  <bean id="bkdFlopSource" scope="singleton"
        class="org.springframework.jndi.JndiObjectFactoryBean" >
    
    <property name="jndiName" value="java:comp/env/jdbc/bkd_flop" />
    <property name="resourceRef" value="true"/>
  </bean>
  
  <!-- data access objects -->
  
  <bean id="bkdNodeDao" class="edu.ucla.mbi.bkd.store.dao.NodeDao"/>
  <bean id="bkdTaxonDao" class="edu.ucla.mbi.bkd.store.dao.TaxonDao"/>
  <bean id="bkdCvTermDao" class="edu.ucla.mbi.bkd.store.dao.CvTermDao"/>
  <bean id="bkdXrefDao" class="edu.ucla.mbi.bkd.store.dao.XrefDao"/>
  <bean id="bkdIdGenDao" class="edu.ucla.mbi.bkd.store.dao.IdGenDao"/>
  <bean id="bkdSourceDao" class="edu.ucla.mbi.bkd.store.dao.SourceDao"/>
  
  <!--
      <bean id="imxdipSourceDao" class="edu.ucla.mbi.dip.database.imxdip.dao.SourceDao">
    <property name="sessionFactory" ref="imxdipSessionFactory"/>
  </bean>


  <bean id="imxdipExptDao" class="edu.ucla.mbi.dip.database.imxdip.dao.ExptDao">
    <property name="sessionFactory" ref="imxdipSessionFactory"/>
  </bean>

  <bean id="imxdipEvidDao" class="edu.ucla.mbi.dip.database.imxdip.dao.EvidDao">
    <property name="sessionFactory" ref="imxdipSessionFactory"/>
  </bean>

  <bean id="imxdipEdgeDao" class="edu.ucla.mbi.dip.database.imxdip.dao.EdgeDao">
    <property name="sessionFactory" ref="imxdipSessionFactory"/>
  </bean>
-->


<!--
  <bean id="imxdipProdDao" class="edu.ucla.mbi.dip.database.imxdip.dao.ProdDao">
    <property name="sessionFactory" ref="imxdipSessionFactory"/>
  </bean>

  <bean id="imexDao" class="edu.ucla.mbi.dip.database.imxdip.dao.ImexDao">
    <property name="sessionFactory" ref="imxdipSessionFactory"/>
  </bean>
-->

  <bean id="bkdDaoContext" class="edu.ucla.mbi.bkd.store.BkdDaoContext">
    
    <property name="state" value="flip"/>
    
    <property name="flipSF" ref="bkdFlipSessionFactory"/>
    <property name="flopSF" ref="bkdFlopSessionFactory"/>
    
    <property name="idGenDao" ref="bkdIdGenDao"/>
    <property name="cvTermDao" ref="bkdCvTermDao"/>
    <property name="taxonDao" ref="bkdTaxonDao"/>
    <property name="nodeDao"  ref="bkdNodeDao"/>
    <property name="xrefDao"  ref="bkdXrefDao"/>
    <property name="sourceDao"  ref="bkdSourceDao"/>
    
  </bean>

<!--    
    <property name="sourceDao" ref="imxdipSourceDao"/>
    <property name="prodDao" ref="imxdipProdDao"/>
    <property name="exptDao" ref="imxdipExptDao"/>
    <property name="evidDao" ref="imxdipEvidDao"/>
    <property name="edgeDao" ref="imxdipEdgeDao"/>
    <property name="typeDao" ref="imxdipTypeDao"/>
    <property name="idGenDao" ref="imxdipIdGenDao"/>
    <property name="imexDao" ref="imexDao"/>    
-->
  
  
  <!-- Record Manager -->

<!--  
  <bean id="imxdipExptRecordManager" class="edu.ucla.mbi.dip.database.ImxdipExptRecordManager"
        init-method="initialize">
     <property name="daoContext" ref="imxdipDaoContext" />
  </bean>

  <bean id="imxdipEvidRecordManager" class="edu.ucla.mbi.dip.database.ImxdipEvidRecordManager"
        init-method="initialize">
     <property name="daoContext" ref="imxdipDaoContext" />
  </bean>

  <bean id="imxdipEdgeRecordManager" class="edu.ucla.mbi.dip.database.ImxdipEdgeRecordManager"
        init-method="initialize">
     <property name="daoContext" ref="imxdipDaoContext" />
  </bean>
-->

   <bean id="bkdRecordManager" class="edu.ucla.mbi.bkd.store.BkdRecordManager"
        init-method="initialize">

     <property name="daoContext" ref="bkdDaoContext" />

<!--
    <property name="exptRecordManager" ref="imxdipExptRecordManager"/>
    <property name="evidRecordManager" ref="imxdipEvidRecordManager"/>
    <property name="edgeRecordManager" ref="imxdipEdgeRecordManager"/>
    
    <property name="nodeDao"  ref="imxdipNodeDao"/>
    <property name="sourceDao" ref="imxdipSourceDao"/>
    <property name="taxonDao" ref="imxdipTaxonDao"/>
    <property name="exptDao" ref="imxdipExptDao"/>
    <property name="evidDao" ref="imxdipEvidDao"/>
    <property name="edgeDao" ref="imxdipEdgeDao"/>
    <property name="typeDao" ref="imxdipTypeDao"/>
    <property name="idGenDao" ref="imxdipIdGenDao"/>
    <property name="cvTermDao" ref="imxdipCvTermDao"/>
-->

   </bean>  
   <!-- Query Manager -->

   <bean id="bkdQueryManager" class="edu.ucla.mbi.bkd.store.BkdQueryManager"
       init-method="initialize" >
     <!-- <property name="nodeDao"  ref="nodeDao"/> -->
   </bean>
 </beans>
